.text
    # 数码管初始化
    addi    $6, $0, 0x0
    sb      $6, 0xfff0($0)      # 设置数码管的值为0
    addi    $1, $0, 0xf         # 
    sb      $1, 0xfff4($0)      # 四个数码管全亮

WAIT:
    lb      $7, 0xfff8($0)      # 读取按键值
    beq     $7, $0, WAIT        # 继续读取按键值

    # 延时 20 毫秒
    # 初始化
    addi    $4, $0, 0x37cb      # 延时1毫秒所需的参数
    addi    $5, $0, 0x0         # 内层延时
    addi    $2, $0, 0x14        # 20次延时1ms
    addi    $3, $0, 0x0         # 外层延时

    # 开始外层延时
DELAY_20MS: 
    # 开始内层延时
DELAY_1MS_1:
    addi    $5, $5, 0x1         # 加1
    bne     $5, $4, DELAY_1MS_1 

    # 内层延时结束
    addi    $5, $0, 0x0         # 复位内层计数器
    addi    $3, $3, 0x1         # 外层延时加1
    bne     $3, $2, DELAY_20MS

    # 重新读取按键值, 并判断按键是否按下
    lb      $7, 0xfff8($0)      # 读取按键值
    addi    $5, $0, 0x1         # 只有一个按键被按下
    bne     $7, $5, WAIT        # 继续读取按键值

    # 计数器加一
    addi    $6, $6, 0x1
    sb      $6, 0xfff0($0)      # 设置数码管的值

    # 延时 100 毫秒, 等待按键恢复
    # 初始化
    addi    $4, $0, 0x37cb      # 延时1毫秒所需的参数
    addi    $5, $0, 0x0         # 内层延时
    addi    $2, $0, 0x64        # 100次延时1ms
    addi    $3, $0, 0x0         # 外层延时

    # 开始外层延时
DELAY_100MS: 
    # 开始内层延时
DELAY_1MS_2:
    addi    $5, $5, 0x1         # 加1
    bne     $5, $4, DELAY_1MS_2 

    # 内层延时结束
    addi    $5, $0, 0x0         # 复位内层计数器
    addi    $3, $3, 0x1         # 外层延时加1
    bne     $3, $2, DELAY_100MS

    j       WAIT



